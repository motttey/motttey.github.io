<!DOCTYPE html>
<html>
<head>

  <script type="text/javascript"
  src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  <script src="dist/semantic.min.js"></script>
  <script type="text/javascript" src="https://secure.skypeassets.com/i/scom/js/skype-uri.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropper/1.0.0/cropper.min.js"></script>

  <meta http-equiv="Content-Script-Type" content="text/javascript">
  <meta charset = "utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta author = "望月田吾作">
  <meta description = "望月 田吾作(もちづき たごさく)が描いたドラえもんをはじめとした絵や漫画の掲載を目的としたサイト.">


  <link rel="stylesheet" type="text/css" href="dist/semantic.min.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/cropper/1.0.0/cropper.min.css" rel="stylesheet" type="text/css" media="all"/>
  <link rel="stylesheet" type="text/css" href="style.css" />
  <link href="https://fonts.googleapis.com/css?family=Passion+One" rel="stylesheet">

   <script src="dependencies/jsbn.js"></script>
    <script src="dependencies/jsbn2.js"></script>
    <script src="dependencies/sjcl.js"></script>
    <script src="dependencies/moment.js"></script>
    <script src="dependencies/aws-cognito-sdk.js"></script>
    <script src="dependencies/amazon-cognito-identity.min.js"></script>
    <script src="dependencies/aws-sdk.js"></script>
  <script type="text/javascript">
  jQuery(document).ready(function($){ 
      //console.log( "hoge" );
      flag = 1;
      AWS.config.region = 'us-east-2'; // Region
      AWS.config.credentials = new AWS.CognitoIdentityCredentials({
          IdentityPoolId: 'us-west-2:493bac8d-13bf-46b6-85cf-aec651faf87d'
      });

          // Cognito User Pool Id
      AWSCognito.config.region = 'us-east-2';
      AWSCognito.config.credentials = new AWS.CognitoIdentityCredentials({
          IdentityPoolId: 'us-west-2:493bac8d-13bf-46b6-85cf-aec651faf87d'
      });

    $("#submituserinfo").on( "click", function(){

      var authenticationData = {
          Username : $('#name').val(),
          Password : $('#password').val()
      };
      var authenticationDetails = new AWSCognito.CognitoIdentityServiceProvider.AuthenticationDetails(authenticationData);
      var poolData = { 
          UserPoolId : 'us-west-2_lJuHLh9N2',
          ClientId : '4nbmg3sh3g9goahlab1q1022tc'
      };
      var userPool = new AWSCognito.CognitoIdentityServiceProvider.CognitoUserPool(poolData);
      var userData = {
          Username : $('#name').val(),
          Pool : userPool
         };

      var cognitoUser = new AWSCognito.CognitoIdentityServiceProvider.CognitoUser(userData);

      cognitoUser.authenticateUser(authenticationDetails, {

          onSuccess: function (result) {
              alert(result);
              console.log('access token + ' + result.getAccessToken().getJwtToken());
              //alert("onSuccess");
          },

          onFailure: function(err) {
              flag = 0;
              alert(err);
          },
      }); 


    });
      console.log(flag);
      if(flag){
        //window.location.href = "past.html";
      }
  });
  </script>

  <title>モチヅ庫</title>
</head>

<body>
<br>
<form id="login" method="post" class="ui form">
    <div class="field">
      <label>Name</label>
      <input type="text" name="name" placeholder="User Name" size="40" id="name">
    </div>
    <div class="field">
      <label>Pass</label>
      <input type="password" name="password" placeholder="Password" size="40" id="password">
    </div>
<input type="button"  class="ui inverted button" value="submit" id="submituserinfo">
</form>


</body>



</html>
